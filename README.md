# 如何对VMware虚拟机/根目录磁盘容量扩展：从20G扩展至50G

在 VMware 环境下操作，特别是针对像 CentOS 7.9 这样的操作系统时，可能会遇到磁盘空间不足的问题。本文档详细指导您如何安全地将 VMware 虚拟机的根目录磁盘容量从原有的20GB扩展到50GB。以下是逐步操作指南，适用于 VMware 17.0.0 版本及以上。

## 步骤一：调整虚拟机磁盘容量

1. **关闭虚拟机**：首先确保你的虚拟机处于关机状态。

   2. **扩展磁盘容量**：
      - 进入 VMware 虚拟机设置。
         - 选择对应的磁盘 -> 编辑 -> 增加容量。
            - 按照向导指示，将磁盘容量增加至50GB，然后确认更改。
               - **重要提示**：此操作不会直接影响到操作系统内的分区大小，仅仅是物理磁盘大小的变化。

               ## 步骤二：在系统内识别新容量

               1. 开启虚拟机，通过终端输入 `fdisk -l` 查看磁盘信息。你会注意到磁盘总容量已变更为42.9G或接近50G（考虑到文件系统预留空间）。

               ## 步骤三：利用 gparted 分配新增空间

               ### 安装 gparted

               1. 在 CentOS 7.9 中，由于默认仓库可能不包含 gparted，需先安装 EPEL 扩展仓库：
                  ```shell
                     yum install epel-release
                        ```

                        2. 接着安装 gparted：
                           ```shell
                              yum install gparted
                                 ```

                                    3. 安装完毕后，启动 gparted 图形界面：
                                       ```shell
                                          gparted
                                             ```

                                             ### 磁盘空间调整

                                             1. 在 gparted 中，你将看到当前磁盘的布局。你需要谨慎操作，**删除现有扩展分区并重新创建**，以适应新的磁盘大小。

                                             2. **重要警告**：在调整分区前，请务必备份重要数据，避免数据丢失。

                                             3. 按照 gparted 的指引，安全删除旧的 / 根目录分区，并重新创建一个分区，占用全部可用空间，确保其大小符合扩展后的需要（大约50GB）。

                                             4. 应用所有更改，gparted 将自动处理剩下的格式化和挂载点分配过程。

                                             完成上述步骤后，您的虚拟机根目录磁盘容量就成功扩展到了50GB。请重启系统，通过 `df -h` 验证新的磁盘空间是否正确分配和使用。记得在进行此类操作时要格外小心，以防数据损失。

                                             ## 下载链接
                                             [如何对VMware虚拟机根目录磁盘容量扩展从20G扩展至50G分享](https://pan.quark.cn/s/ed9a199eef5a) 

                                             (备用: [备用下载](https://pan.baidu.com/s/13qGuviRhtWe6VERGhgywIg?pwd=1234))
